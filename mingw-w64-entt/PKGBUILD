# Maintainer: 

_realname=entt
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=3.7.1
pkgrel=1
pkgdesc="A fast and reliable entity-component system"
arch=('any')
mingw_arch=('mingw32' 'mingw64' 'ucrt64' 'clang64')
url="https://github.com/skypjack/entt"
license=('MIT')
#depends=('') # Tests depend on gtest, see https://github.com/skypjack/entt#tests
makedepends=("${MINGW_PACKAGE_PREFIX}-cmake")
options=('strip' 'staticlibs')
source=("https://github.com/skypjack/entt/archive/refs/tags/v${pkgver}.tar.gz")
sha256sums=('FE3CE773C17797C0C57FFA97F73902854FCC8E7AFC7E09BEA373E0C64FA24A23')

prepare() {
  cd "${srcdir}/${_realname}-${pkgver}"
}

build() {
  [[ -d ${srcdir}/${_realname}-${pkgver}/build-${CARCH} ]] && rm -rf ${srcdir}/${_realname}-${pkgver}/build-${CARCH}
  mkdir -p ${srcdir}/${_realname}-${pkgver}/build-${CARCH} && cd ${srcdir}/${_realname}-${pkgver}/build-${CARCH}

  cmake .. -G "MSYS Makefiles" -DCMAKE_INSTALL_PREFIX="../install-${CARCH}"
  make install
}

package() {
  mkdir -p ${pkgdir}/${MINGW_PREFIX}
  cp -r ${srcdir}/${_realname}-${pkgver}/install-${CARCH}/. ${pkgdir}/${MINGW_PREFIX}/
}