diff --git "a/configure.ac" "b/configure.ac"
index ba4e61846..e288e69cf 100644
--- "a/configure.ac"	
+++ "b/configure.ac"
@@ -159,6 +159,17 @@ PKG_CHECK_MODULES([RSVG_CONVERT],[gio-2.0 "gio-${gio_backend}-2.0" gdk-pixbuf-2.
 
 GLIB_TESTS
 
+
+AS_IF([test x"$platform" = xWindows], [
+  ## Cannot use AC_CHECK_LIB to check for function with __stdcall
+  ## calling convention.  Instead just check for the header and add the
+  ## corresponding library to the linker flags.
+  AC_CHECK_HEADER([winsock2.h], [LIBS="$LIBS -lws2_32"], [], [#include <windows.h>])
+  AC_CHECK_HEADER([userenv.h], [LIBS="$LIBS -luserenv"], [], [#include <windows.h>])
+  ## needed for vendor/winapi
+  AC_CHECK_HEADER([bcrypt.h], [LIBS="$LIBS -lbcrypt"], [], [#include <windows.h>])
+])
+
 dnl ===========================================================================
 dnl GDK-Pixbuf SVG loader
 dnl ===========================================================================
