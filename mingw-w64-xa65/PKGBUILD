#

_realname=xa65
pkgbase=mingw-w64-${_realname}
pkgname="${MINGW_PACKAGE_PREFIX}-${_realname}"
pkgver=2.3.11
pkgrel=1
pkgdesc="6502/65816 cross assembler"
arch=('any')
mingw_arch=('mingw32' 'mingw64' 'ucrt64' 'clang64' 'clang32')
license=('GPL2')
url="http://www.floodgap.com/retrotech/xa/"
depends=()
makedepends=("${MINGW_PACKAGE_PREFIX}-cc")
options=(!strip staticlibs !buildflags)
source=("https://github.com/fachat/${_realname}/archive/xa-${pkgver}.tar.gz")
sha256sums=('0a1bdaa4a0059f2ecaa577ad322b5618a4d79adb68a7e95721293c95a995a11a')

prepare() {
  cd ${srcdir}/${_realname}-xa-${pkgver}/xa
  sed -i '/DESTDIR =/d' Makefile
}

build() {
  cd ${srcdir}/${_realname}-xa-${pkgver}/xa
  make ${MAKEFLAGS}
}

package() {
  cd ${srcdir}/${_realname}-xa-${pkgver}/xa
  make DESTDIR=${pkgdir}${MINGW_PREFIX} install
  install -Dm644 ${srcdir}/${_realname}-xa-${pkgver}/xa/README.1st ${pkgdir}${MINGW_PREFIX}/share/doc/${_realname}/README
}
