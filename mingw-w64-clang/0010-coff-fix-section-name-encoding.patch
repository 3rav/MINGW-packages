--- llvm/tools/llvm-objcopy/COFF/Writer.cpp.orig	2022-02-20 12:06:40.311031900 +0100
+++ llvm/tools/llvm-objcopy/COFF/Writer.cpp	2022-02-20 12:08:38.146886400 +0100
@@ -130,8 +130,10 @@
   for (auto &S : Obj.getMutableSections()) {
     memset(S.Header.Name, 0, sizeof(S.Header.Name));
     if (S.Name.size() > COFF::NameSize) {
-      snprintf(S.Header.Name, sizeof(S.Header.Name), "/%d",
+      char Buf[COFF::NameSize + 1]{};
+      snprintf(Buf, sizeof(Buf), "/%d",
                (int)StrTabBuilder.getOffset(S.Name));
+      memcpy(S.Header.Name, Buf, COFF::NameSize);
     } else {
       memcpy(S.Header.Name, S.Name.data(), S.Name.size());
     }
